{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Gunfire Airsoft & More - Clone{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">

    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }

        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        .htmx-indicator {
            display: none;
        }

        .htmx-request .htmx-indicator {
            display: inline;
        }

        .htmx-request.htmx-indicator {
            display: inline;
        }
    </style>
</head>

<body hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>
    <div id="app" class="flex flex-col min-h-screen">
        <!-- HEADER -->
        <header class="bg-white shadow-sm sticky top-0 z-50">
            <!-- Top Utility Bar -->
            <div class="bg-[#1a1a1a] text-xs text-gray-400 py-2 border-b border-gray-800">
                <div class="container mx-auto px-4 flex justify-between items-center">
                    <div class="flex items-center space-x-6">
                        <div class="flex items-center space-x-2">
                            <i data-lucide="phone" class="w-3 h-3"></i>
                            <span>Contact: +48 228 228 228</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <i data-lucide="mail" class="w-3 h-3"></i>
                            <a href="#" class="hover:text-white transition-colors">Contact form</a>
                        </div>
                    </div>

                    <div class="flex items-center space-x-4">
                        <span class="flex items-center">
                            Best airsoft guns!
                        </span>
                    </div>

                    <div class="flex items-center space-x-4">
                        <div class="flex items-center cursor-pointer hover:text-white">
                            Currency: <span class="text-white ml-1 font-bold">€</span> <i data-lucide="chevron-down"
                                class="ml-1 w-2.5 h-2.5"></i>
                        </div>
                        <div class="flex items-center cursor-pointer hover:text-white">
                            Poland <i data-lucide="chevron-down" class="ml-1 w-2.5 h-2.5"></i>
                        </div>
                        <div class="flex items-center cursor-pointer hover:text-white">
                            Language: <img src="https://flagcdn.com/w20/gb.png" alt="EN" class="ml-1 w-4"> <i
                                data-lucide="chevron-down" class="ml-1 w-2.5 h-2.5"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Header -->
            <div class="bg-[#1a1a1a] py-4">
                <div class="container mx-auto px-4 flex items-center justify-between gap-8">
                    <!-- Logo -->
                    <div class="cursor-pointer flex items-center" hx-get="{% url 'home' %}" hx-target="#main-content"
                        hx-push-url="true">
                        <div class="bg-orange-500 rounded-full p-2 mr-2">
                            <div class="text-white font-black text-xl italic leading-none">B</div>
                        </div>
                        <div>
                            <div class="text-white font-black text-2xl tracking-tighter leading-none">BATTLEGUN</div>
                            <div class="text-gray-400 text-[10px] font-bold tracking-widest mt-0.5">AIRSOFT GUNS</div>
                        </div>
                    </div>

                    <!-- Search Bar -->
                    <div class="flex-1 max-w-2xl flex">
                        <div class="relative flex-1">
                            <div class="absolute inset-y-0 left-3 flex items-center pointer-events-none">
                                <i data-lucide="search" class="text-gray-500 w-4 h-4"></i>
                            </div>
                            <input type="text" name="q" placeholder="Find product"
                                class="w-full bg-[#2a2a2a] text-white border-none rounded-l h-10 pl-10 pr-4 focus:ring-1 focus:ring-orange-500 text-sm outline-none" />
                        </div>
                        <button
                            class="bg-orange-600 hover:bg-orange-700 text-white font-bold h-10 px-6 rounded-r text-sm transition-colors">
                            Search
                        </button>
                    </div>

                    <!-- Actions -->
                    <div class="flex items-center space-x-8 text-gray-300">
                        <button class="flex flex-col items-center hover:text-orange-500 transition-colors">
                            <i data-lucide="user" class="w-5 h-5"></i>
                            <span class="text-[10px] mt-1 font-medium">Login / Register</span>
                        </button>
                        <button class="flex flex-col items-center hover:text-orange-500 transition-colors">
                            <i data-lucide="scale" class="w-5 h-5"></i>
                            <span class="text-[10px] mt-1 font-medium">Compare</span>
                        </button>
                        <button class="flex flex-col items-center hover:text-orange-500 transition-colors relative">
                            <i data-lucide="heart" class="w-5 h-5"></i>
                            <span class="text-[10px] mt-1 font-medium">Wish list</span>
                        </button>

                        <!-- Cart Button (Trigger Modal) -->
                        <button hx-get="{% url 'cart_modal' %}" hx-target="#cart-modal-container" hx-trigger="click"
                            class="bg-orange-600 hover:bg-orange-700 p-1 rounded transition-colors flex items-center h-12 min-w-[120px]">
                            <div
                                class="flex flex-col items-center justify-center border-r border-orange-500/50 px-2 relative">
                                <i data-lucide="shopping-cart" class="text-white w-6 h-6"></i>
                                <span id="header-cart-count"
                                    class="absolute -top-1 -right-1 bg-black text-white text-[9px] rounded-full w-4 h-4 flex items-center justify-center font-bold">0</span>
                            </div>
                            <div class="flex flex-col items-start px-3 text-white">
                                <span id="header-cart-total" class="text-[11px] font-bold leading-none">0.00 €</span>
                            </div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Navigation Menu -->
            <div class="bg-[#1a1a1a] border-t border-gray-800">
                <div class="container mx-auto px-4">
                    <nav
                        class="flex items-center justify-center space-x-6 text-[11px] font-bold uppercase tracking-wider h-10">
                        <a href="#" hx-get="{% url 'product_list' %}" hx-target="#main-content" hx-push-url="true"
                            class="text-white hover:text-orange-500 flex items-center">Airsoft replicas <i
                                data-lucide="chevron-down" class="ml-1 w-2.5 h-2.5"></i></a>
                        <a href="#" class="text-white hover:text-orange-500 flex items-center">Parts and accessories <i
                                data-lucide="chevron-down" class="ml-1 w-2.5 h-2.5"></i></a>
                        <a href="#" class="text-white hover:text-orange-500 flex items-center">Internal parts <i
                                data-lucide="chevron-down" class="ml-1 w-2.5 h-2.5"></i></a>
                        <a href="#" class="text-white hover:text-orange-500 flex items-center">Tactical equipment <i
                                data-lucide="chevron-down" class="ml-1 w-2.5 h-2.5"></i></a>
                        <a href="#" class="text-white hover:text-orange-500">New products</a>
                        <a href="#" class="text-white hover:text-orange-500">Bestsellers</a>
                        <a href="#" class="text-white hover:text-orange-500">Producers</a>
                        <a href="#" class="text-white hover:text-orange-500">Technical support</a>
                        <a href="#" class="text-white hover:text-orange-500">Outlet</a>
                        <div class="h-4 w-px bg-gray-700 mx-2"></div>
                    </nav>
                </div>
            </div>
        </header>

        <!-- MAIN CONTENT -->
        <main class="flex-grow" id="main-content">
            {% block content %}
            {% endblock %}
        </main>

        <!-- FOOTER -->
        <footer class="bg-[#1a1a1a] text-white pt-16 pb-8">
            <div class="container mx-auto px-4">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16">
                    <div>
                        <h4 class="font-bold text-sm uppercase mb-6 tracking-wider">Information</h4>
                        <ul class="space-y-3 text-xs text-gray-400">
                            <li><a href="#" class="hover:text-white transition-colors">Shipping</a></li>
                            <li><a href="#" class="hover:text-white transition-colors">Payments</a></li>
                            <li><a href="#" class="hover:text-white transition-colors">Returns and complaints</a></li>
                            <li><a href="#" class="hover:text-white transition-colors">Promotion terms</a></li>
                            <li><a href="#" class="hover:text-white transition-colors">Promotions</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold text-sm uppercase mb-6 tracking-wider">Contact Us</h4>
                        <div class="flex items-start space-x-3 mb-4">
                            <img src="https://flagcdn.com/w20/pl.png" alt="PL" class="mt-1 w-5" />
                            <span class="font-bold text-xl">+48 228 228 228</span>
                        </div>
                        <div class="text-xs text-gray-400 mb-6">
                            Wholesale:<br />
                            <span class="text-white font-medium">+48 228 228 228</span>
                        </div>
                    </div>
                    <!-- Other footer columns omitted for brevity but keeping structure -->
                </div>

                <div class="mt-12 flex justify-between items-end border-t border-gray-800 pt-8">
                    <div class="text-[10px] text-gray-500 font-medium">
                        Copyright © 2006 - 2026 Battlegun®. All rights reserved.
                    </div>
                    <div class="bg-white p-1 rounded text-black text-[10px] font-bold">
                        Powered by <span class="text-blue-600">IdoSell.</span>
                    </div>
                </div>
            </div>
        </footer>

        <!-- Floating Chat Button -->
        <button
            class="fixed bottom-6 right-6 bg-orange-600 text-white p-4 rounded-full shadow-2xl hover:scale-110 transition-transform z-50 group">
            <div
                class="absolute -top-12 right-0 bg-white text-black text-[10px] font-black uppercase tracking-widest px-4 py-2 rounded shadow-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none border border-gray-100">
                How can I help?
            </div>
            <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                <path
                    d="M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H5.17L4 17.17V4H20V16Z" />
            </svg>
        </button>

    </div>

    <!-- Cart Modal Container -->
    <div id="cart-modal-container"></div>

    <script>
        lucide.createIcons();
        document.body.addEventListener('htmx:afterSwap', function (evt) {
            lucide.createIcons();
        });
    </script>
</body>

</html>